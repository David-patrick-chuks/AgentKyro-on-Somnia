Refactor ConditionalTransaction model for better type safety
